items = [
  %{
    title: "Professional Smart Home Automation System with AI-Powered Controls",
    content: "Transform your living space with our revolutionary smart home system that seamlessly integrates artificial intelligence and automation. This comprehensive solution offers voice-activated controls, advanced security features, and intelligent energy management. The system learns from your daily routines to optimize comfort and efficiency while providing real-time monitoring through our intuitive mobile application.",
    link: "https://smarthome.example.com/premium-system",
    tags: "smart home, automation, AI, security",
    min: 15,
    max: 45,
    duration: 30
  },
  %{
    title: "Enterprise Cloud Security Platform for Modern Business Protection",
    content: "Leading enterprise security solution designed for modern businesses. Our platform combines advanced threat detection, real-time monitoring, and automated response mechanisms to protect your digital assets. Features include AI-powered anomaly detection, comprehensive audit trails, and seamless integration with existing infrastructure.",
    link: "https://security.example.com/enterprise",
    tags: "security, cloud, enterprise, monitoring",
    min: 25,
    max: 75,
    duration: 60
  },
  %{
    title: "Advanced Digital Marketing Analytics Suite for Growth Optimization",
    content: "Comprehensive marketing analytics platform that helps businesses track, analyze and optimize their digital marketing campaigns. Features include real-time performance tracking, competitor analysis, automated reporting, and AI-driven insights to maximize ROI across all marketing channels.",
    link: "https://analytics.example.com/marketing",
    tags: "marketing, analytics, digital, ROI",
    min: 20,
    max: 60,
    duration: 180
  },
  %{
    title: "Premium Online Learning Platform with Industry Expert Courses",
    content: "Access world-class education with our curated collection of expert-led courses. Platform includes interactive learning materials, practical assignments, peer collaboration tools, and professional certification options. Perfect for professionals seeking to upgrade their skills.",
    link: "https://learning.example.com/premium",
    tags: "education, online learning, professional development",
    min: 30,
    max: 80,
    duration: 60
  },
  %{
    title: "Comprehensive Financial Planning Software for Wealth Management",
    content: "Professional-grade financial planning tool designed for wealth managers and financial advisors. Includes portfolio optimization, risk assessment, retirement planning, and tax strategy features. Real-time market data integration and automated reporting capabilities.",
    link: "https://finance.example.com/wealth-pro",
    tags: "finance, planning, wealth management",
    min: 35,
    max: 85,
    duration: 180
  },
  %{
    title: "Enterprise Project Management Solution with Collaboration Tools",
    content: "Streamline your project management with our comprehensive solution. Features include resource allocation, timeline management, budget tracking, and team collaboration tools. Integrates with popular business software and provides detailed analytics.",
    link: "https://project.example.com/enterprise",
    tags: "project management, collaboration, enterprise",
    min: 20,
    max: 65,
    duration: 30
  },
  %{
    title: "Advanced E-commerce Platform with AI-Powered Personalization",
    content: "Complete e-commerce solution featuring AI-driven product recommendations, inventory management, customer analytics, and marketing automation. Includes mobile-optimized storefront and secure payment processing.",
    link: "https://ecommerce.example.com/advanced",
    tags: "ecommerce, retail, AI, personalization",
    min: 25,
    max: 70,
    duration: 60
  },
  %{
    title: "Professional Video Editing Suite with Cloud Collaboration",
    content: "Powerful video editing software with cloud-based collaboration features. Includes advanced effects, 4K support, audio editing, and real-time team collaboration capabilities. Perfect for professional content creators.",
    link: "https://video.example.com/pro-suite",
    tags: "video editing, creative, collaboration",
    min: 30,
    max: 75,
    duration: 180
  },
  %{
    title: "Comprehensive Healthcare Management System for Medical Practices",
    content: "Integrated healthcare management solution for medical practices. Features include patient records management, appointment scheduling, billing integration, and compliance tracking. Secure and HIPAA-compliant.",
    link: "https://health.example.com/practice",
    tags: "healthcare, management, medical",
    min: 40,
    max: 90,
    duration: 60
  },
  %{
    title: "Enterprise Data Analytics Platform with Machine Learning",
    content: "Advanced data analytics platform featuring machine learning capabilities, data visualization, predictive modeling, and automated reporting. Helps businesses make data-driven decisions with powerful insights.",
    link: "https://analytics.example.com/enterprise",
    tags: "analytics, data, machine learning",
    min: 35,
    max: 85,
    duration: 180
  },
  %{
    title: "Premium Cryptocurrency Trading Platform with Advanced Analytics",
    content: "Professional cryptocurrency trading platform with real-time market data, advanced charting tools, and automated trading strategies. Features include portfolio tracking, risk management, and integration with major exchanges.",
    link: "https://crypto.example.com/premium",
    tags: "cryptocurrency, trading, finance, analytics",
    min: 30,
    max: 80,
    duration: 60
  },
  %{
    title: "Enterprise-Grade Virtual Reality Development Platform for Business Solutions",
    content: "Professional VR development platform designed for enterprise applications. Features include advanced 3D modeling tools, multi-user collaboration environments, and integration with existing business systems. Perfect for training simulations and virtual product demonstrations.",
    link: "https://vr.example.com/enterprise",
    tags: "virtual reality, enterprise, development, training",
    min: 40,
    max: 90,
    duration: 180
  },
  %{
    title: "Advanced Telemedicine Platform with Integrated Patient Management System",
    content: "Comprehensive telemedicine solution for healthcare providers. Includes secure video consultations, electronic health records integration, prescription management, and automated appointment scheduling. HIPAA-compliant with advanced security features.",
    link: "https://telemedicine.example.com/pro",
    tags: "healthcare, telemedicine, patient care",
    min: 35,
    max: 85,
    duration: 60
  },
  %{
    title: "Professional Digital Asset Management Platform for Enterprise Organizations",
    content: "Enterprise-level digital asset management solution with advanced organization and collaboration features. Includes AI-powered tagging, version control, rights management, and seamless integration with creative tools.",
    link: "https://dam.example.com/enterprise",
    tags: "digital assets, management, enterprise",
    min: 25,
    max: 75,
    duration: 30
  },
  %{
    title: "Comprehensive Supply Chain Management Solution with Real-time Analytics",
    content: "End-to-end supply chain management platform featuring real-time tracking, inventory optimization, and predictive analytics. Includes supplier management, logistics planning, and automated procurement processes.",
    link: "https://supply-chain.example.com/premium",
    tags: "supply chain, logistics, analytics",
    min: 30,
    max: 80,
    duration: 180
  },
  %{
    title: "Advanced Customer Relationship Management Platform with AI Integration",
    content: "Next-generation CRM system with integrated AI capabilities for enhanced customer insights. Features include automated lead scoring, predictive analytics, and personalized customer journey mapping.",
    link: "https://crm.example.com/advanced",
    tags: "CRM, customer management, AI",
    min: 35,
    max: 85,
    duration: 60
  },
  %{
    title: "Professional Game Development Engine with Cross-Platform Capabilities",
    content: "Powerful game development platform supporting multiple platforms and devices. Includes advanced graphics rendering, physics engine, multiplayer networking, and comprehensive asset management system.",
    link: "https://gamedev.example.com/pro",
    tags: "game development, cross-platform, graphics",
    min: 40,
    max: 90,
    duration: 180
  },
  %{
    title: "Enterprise Human Resources Management System with Advanced Analytics",
    content: "Comprehensive HR management platform featuring employee tracking, performance management, and advanced analytics. Includes recruitment tools, benefits administration, and compliance monitoring.",
    link: "https://hrms.example.com/enterprise",
    tags: "HR, management, analytics",
    min: 30,
    max: 80,
    duration: 60
  },
  %{
    title: "Professional Content Management System with Advanced Publishing Tools",
    content: "Enterprise-grade CMS platform with comprehensive publishing and content management features. Includes multi-channel distribution, SEO optimization, and advanced workflow management.",
    link: "https://cms.example.com/pro",
    tags: "CMS, content management, publishing",
    min: 25,
    max: 75,
    duration: 30
  },
  %{
    title: "Advanced Business Intelligence Platform with Predictive Analytics",
    content: "Comprehensive business intelligence solution featuring advanced data visualization, predictive modeling, and automated reporting. Includes real-time analytics, custom dashboards, and integration with multiple data sources.",
    link: "https://bi.example.com/advanced",
    tags: "business intelligence, analytics, reporting",
    min: 35,
    max: 85,
    duration: 180
  },
  %{
    title: "Professional Network Security Management System with Threat Detection",
    content: "Enterprise network security platform featuring advanced threat detection, real-time monitoring, and automated response capabilities. Includes comprehensive firewall management, intrusion detection, and security analytics.",
    link: "https://security-management.example.com/pro",
    tags: "network security, threat detection, monitoring",
    min: 40,
    max: 90,
    duration: 60
  },
  %{
    title: "Premium Cryptocurrency Trading Platform with Advanced Analytics",
    content: "Professional-grade cryptocurrency trading platform featuring real-time market data, advanced charting tools, and automated trading strategies. Includes portfolio management, risk analysis, and secure wallet integration.",
    link: "https://crypto-trading.example.com/premium",
    tags: "cryptocurrency, trading, analytics",
    min: 30,
    max: 80,
    duration: 90
  },
  %{
    title: "Enterprise E-commerce Solution with AI-Powered Personalization",
    content: "Comprehensive e-commerce platform featuring AI-driven product recommendations, dynamic pricing, and personalized shopping experiences. Includes inventory management, order processing, and customer analytics.",
    link: "https://ecommerce.example.com/enterprise",
    tags: "ecommerce, AI, personalization",
    min: 35,
    max: 85,
    duration: 60
  },
  %{
    title: "Professional Digital Asset Management Platform",
    content: "Enterprise-level digital asset management system for organizing, storing, and distributing digital content. Features include AI-powered tagging, version control, and secure content distribution.",
    link: "https://dam.example.com/pro",
    tags: "digital assets, management, content",
    min: 25,
    max: 75,
    duration: 45
  },
  %{
    title: "Advanced Healthcare Management System with Telemedicine",
    content: "Comprehensive healthcare platform featuring electronic health records, telemedicine capabilities, and practice management tools. Includes appointment scheduling, billing integration, and patient portal.",
    link: "https://healthcare.example.com/advanced",
    tags: "healthcare, telemedicine, management",
    min: 40,
    max: 90,
    duration: 120
  },
  %{
    title: "Premium Stock Trading Platform with AI Analysis",
    content: "Professional stock trading solution with advanced market analysis, AI-powered predictions, and automated trading capabilities. Features real-time data, portfolio tracking, and risk management tools.",
    link: "https://trading.example.com/premium",
    tags: "trading, stocks, AI analysis",
    min: 45,
    max: 95,
    duration: 90
  },
  %{
    title: "Enterprise Legal Practice Management Software",
    content: "Comprehensive legal practice management solution featuring case management, document automation, and billing tools. Includes client portal, deadline tracking, and compliance monitoring.",
    link: "https://legal.example.com/enterprise",
    tags: "legal, practice management, compliance",
    min: 35,
    max: 85,
    duration: 60
  },
  %{
    title: "Professional Real Estate Investment Platform",
    content: "Advanced real estate investment platform featuring property analysis, portfolio management, and market insights. Includes investment tracking, ROI calculations, and risk assessment tools.",
    link: "https://realestate.example.com/pro",
    tags: "real estate, investment, analysis",
    min: 30,
    max: 80,
    duration: 180
  },
  %{
    title: "Advanced Marketing Automation Platform",
    content: "Comprehensive marketing automation solution with campaign management, lead scoring, and customer journey mapping. Features include email marketing, social media integration, and analytics.",
    link: "https://marketing.example.com/advanced",
    tags: "marketing, automation, analytics",
    min: 35,
    max: 85,
    duration: 90
  },
  %{
    title: "Premium Online Course Creation Platform",
    content: "Professional platform for creating and selling online courses. Features include content management, student engagement tools, and payment processing. Includes analytics and marketing tools.",
    link: "https://course-creation.example.com/premium",
    tags: "education, course creation, online learning",
    min: 25,
    max: 75,
    duration: 60
  },
  %{
    title: "Enterprise Supply Chain Management System",
    content: "Comprehensive supply chain management platform featuring inventory tracking, supplier management, and logistics optimization. Includes real-time tracking, analytics, and forecasting tools.",
    link: "https://supply-chain.example.com/enterprise",
    tags: "supply chain, management, logistics",
    min: 40,
    max: 90,
    duration: 120
  },
  %{
    title: "Professional Fitness and Wellness Platform",
    content: "Advanced fitness and wellness management platform featuring workout planning, nutrition tracking, and progress monitoring. Includes virtual coaching, community features, and health analytics.",
    link: "https://fitness.example.com/pro",
    tags: "fitness, wellness, health",
    min: 20,
    max: 70,
    duration: 45
  },
  %{
    title: "Advanced Cloud Infrastructure Management Platform",
    content: "Enterprise-grade cloud infrastructure management solution featuring resource optimization, cost management, and security controls. Includes monitoring, automation, and compliance tools.",
    link: "https://cloud-management.example.com/advanced",
    tags: "cloud, infrastructure, management",
    min: 45,
    max: 95,
    duration: 180
  },
  %{
    title: "Premium Video Production and Editing Suite",
    content: "Professional video production and editing platform with advanced effects, collaboration tools, and asset management. Features include 4K support, cloud rendering, and project sharing.",
    link: "https://video-production.example.com/premium",
    tags: "video, production, editing",
    min: 35,
    max: 85,
    duration: 90
  },
  %{
    title: "Enterprise Data Analytics Platform",
    content: "Comprehensive data analytics solution featuring big data processing, machine learning capabilities, and visualization tools. Includes predictive analytics, reporting, and data integration.",
    link: "https://analytics.example.com/enterprise",
    tags: "data analytics, machine learning, visualization",
    min: 50,
    max: 100,
    duration: 120
  },
  %{
    title: "Professional Event Management Platform",
    content: "Advanced event management solution featuring registration, ticketing, and attendee engagement tools. Includes virtual event capabilities, analytics, and marketing integration.",
    link: "https://events.example.com/pro",
    tags: "events, management, virtual",
    min: 25,
    max: 75,
    duration: 60
  },
  %{
    title: "Advanced Customer Support Management System",
    content: "Comprehensive customer support platform featuring ticket management, knowledge base, and chat support. Includes automation tools, analytics, and integration capabilities.",
    link: "https://support.example.com/advanced",
    tags: "customer support, management, service",
    min: 30,
    max: 80,
    duration: 90
  },
  %{
    title: "Premium Social Media Management Platform",
    content: "Professional social media management solution featuring content scheduling, engagement tracking, and analytics. Includes campaign management, reporting, and team collaboration tools.",
    link: "https://social-media.example.com/premium",
    tags: "social media, management, analytics",
    min: 25,
    max: 75,
    duration: 45
  },
  %{
    title: "Enterprise Resource Planning System",
    content: "Comprehensive ERP solution featuring financial management, HR, and operations tools. Includes reporting, analytics, and integration with business systems.",
    link: "https://erp.example.com/enterprise",
    tags: "ERP, management, planning",
    min: 45,
    max: 95,
    duration: 180
  },
  %{
    title: "Professional Website Builder Platform",
    content: "Advanced website building solution featuring drag-and-drop interface, responsive design tools, and SEO optimization. Includes hosting, analytics, and e-commerce capabilities.",
    link: "https://website-builder.example.com/pro",
    tags: "website, builder, design",
    min: 20,
    max: 70,
    duration: 60
  },
  %{
    title: "Advanced Mobile App Development Platform",
    content: "Comprehensive mobile app development solution featuring cross-platform capabilities, testing tools, and deployment management. Includes analytics, user feedback, and version control.",
    link: "https://app-development.example.com/advanced",
    tags: "mobile apps, development, testing",
    min: 35,
    max: 85,
    duration: 90
  }
]



defmodule Moly.AffiliateFake do
  require Ash.Query
  require AshPostgres.DataLayer

  def random_image() do
    ids =
      Ash.Query.filter(Moly.Contents.Post, post_type == :attachment)
      |> Ash.read!(actor: %{roles: [:user]})
      |> Enum.map(&(&1.id))
    num = Enum.random(1..6)
    Enum.take_random(ids, num)
  end
  def get_actor(id) do
    Ash.get!(Moly.Accounts.User, id, context: %{private: %{ash_authentication?: true}})
    |> Map.put(:roles, [:owner])
  end
  def random_country(), do: get_term_taxonomy("countries") |> Enum.random() |> Map.get(:id)
  def random_industry(), do: get_term_taxonomy("industries") |> Enum.random() |> Map.get(:id)
  defp get_term_taxonomy(slug) do
    Ash.Query.filter(Moly.Terms.TermTaxonomy, parent.slug == ^slug)
    |> Ash.Query.load([:term])
    |> Ash.read!(actor: %{roles: [:user]})
  end
end

actor = Moly.AffiliateFake.get_actor("4c9b10d5-2f1d-41a0-b0b4-57f07f3c9bb3")

for item <- items do
  tags =
    item.tags
    |> String.split(",")
    |> Enum.reduce([], fn tag, acc ->
      name = String.trim(tag)
      slug = Moly.Helper.string2slug(name)
      new = %{"name" => name, "slug" => slug, "term_taxonomy" => [%{"taxonomy" => "affiliate_tag"}]}
      [new | acc]
    end)

  meida_ids = Moly.AffiliateFake.random_image()

  feture_id = List.first(meida_ids)
  meida_ids = meida_ids |> Enum.join(",")

  insert_data = %{
    post_title: item.title,
    post_content: item.content,
    post_type: :affiliate,
    post_status: :publish,
    post_name: Moly.Helper.generate_random_str(),
    tags: tags,
    post_meta: [
      %{meta_key: :affiliate_link, meta_value: item.link},
      %{meta_key: :commission_min, meta_value: "#{item.min}"},
      %{meta_key: :commission_max, meta_value: "#{item.max}"},
      %{meta_key: :cookie_duration, meta_value: "#{item.duration}"},
      %{meta_key: :commission_model, meta_value: "CPC"},
      %{meta_key: :commission_unit, meta_value: "%"},
      %{meta_key: :attachment_affiliate_media, meta_value: meida_ids},
      %{meta_key: :attachment_affiliate_media_feature, meta_value: feture_id},
    ],
    tags: tags,
    categories: [Moly.AffiliateFake.random_country(), Moly.AffiliateFake.random_industry()],
    post_date: DateTime.utc_now()
  }

  {:ok, _} = Ash.create(Moly.Contents.Post, insert_data, action: :create_post, actor: actor)
end
